# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":0,"y":0,"deletable":false,"next":{"block":{"type":"variables_set_prime_hub","id":"d|X,{Z~Ik_?^j9zd.v1R","extraState":{"optionLevel":1},"fields":{"VAR":{"id":"cV#jG$.a,HQ;3UBlW=g|"}},"inputs":{"AXIS_TOP":{"shadow":{"type":"blockParametersAxis","id":"~Z6h1JdVjI(!G!]EmUHF","fields":{"VALUE":"z"}}},"AXIS_FRONT":{"shadow":{"type":"blockParametersAxis","id":"*HT5p][Y!o2WGD~|mx`L","fields":{"VALUE":"x"}}}},"next":{"block":{"type":"variables_set_motor","id":"m}9-A@=2C$F5]O,C)VUv","fields":{"VAR":{"id":"LKO41#Q@9me`6-QJe@#s"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"~+lIa@6pJBDi]X-sNz%r","fields":{"NAME":"C"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"_J$`(7APxr]MVr6r-~8G","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"ehl$OA~#/(-7I$rgjd36","fields":{"VAR":{"id":"y_#NKZmCwlKk:iC=su@z"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"0z.Hhc/3u#Hl8.h%]V5A","fields":{"NAME":"D"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"k968oS$l4JDu+Wq2zNQ7","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_drive_base","id":"=w-pwb.6trN^9GU+t5{o","fields":{"VAR":{"id":"**bHeFrF+W39NKvVXSgL"}},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"}/miC6*.Di[|Z~Cr*;7A","fields":{"VAR":{"id":"y_#NKZmCwlKk:iC=su@z","name":"left wheel","type":"Motor"}}}},"VAR2":{"shadow":{"type":"variables_get_motor_device","id":"qDp6c9HL_iJVe00D1EIQ","fields":{"VAR":{"id":"LKO41#Q@9me`6-QJe@#s","name":"right wheel","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_distance","id":"[CZ.!9[R;,?7pal~0eW,","fields":{"VALUE0":62.4}}},"VALUE1":{"shadow":{"type":"unit_distance","id":"d-x{9,lRGANoKkN!`fM6","fields":{"VALUE0":80}}}},"next":{"block":{"type":"variables_set_motor","id":"oJ;Z2vcd+!mUG5sbL$J]","fields":{"VAR":{"id":"a_skp~uz0t]beb17^+1K"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"favTBr.^k/*z7FtyuGdG","fields":{"NAME":"B"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"|Q-DUHJBJK7Z(M!Fcg.r","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"|)4_)p:81VH)SVDxuu3H","fields":{"VAR":{"id":"Cy+CR$Qq$t/4xw653]j="}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"u8Cc7fYR)Olpr][VobCl","fields":{"NAME":"F"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"e0mLX-[Veo1UBy-L,4Bi","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_setup_imported_function","id":"5f*Qqc!-2`_xD@_T7k6E","fields":{"FROM_MODULE":{"id":"j;l%-0}YhlUr*R9-?A{!"},"VAR":{"id":"/+t;ZvL*9+cOin=inFlS"}}}}}}}}}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":-451,"y":583,"deletable":false,"next":{"block":{"type":"blockDriveBaseUseGyro","id":"$SdMveIkI+C4of4}LXDR","fields":{"METHOD":"DRIVEBASE_USE_GYRO_TRUE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"+{/|.M!eBdgk^$0KwNgS","fields":{"VAR":{"id":"**bHeFrF+W39NKvVXSgL","name":"drive base","type":"DriveBase"}}}}},"next":{"block":{"type":"blockComment","id":"aB{{avslzM)g6GDw-@`z","fields":{"FIELDNAME":"Test forward turn"},"next":{"block":{"type":"blockDriveBaseDrive2","id":"kuQZR{bYO9J!sU[ZX^6s","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":".$GxdOx6WlhJ)~%$v!MR","fields":{"VAR":{"id":"**bHeFrF+W39NKvVXSgL","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"XhLLEUX7FGS[vDjUGJ[3","fields":{"VALUE0":200}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"5QS[DJ`C=.XOewsJE%+i","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockImportTaskCallStatement","id":"#4k(Cs7@zDuf4jw3H1fr","extraState":{"optionLevel":4},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"/;.rG:CUk~Jy]@O24!A-","fields":{"VAR":{"id":"/+t;ZvL*9+cOin=inFlS","name":"steer_turn","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"wB+^?,eVFq/hjr|tu_L8","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"$CL-)IvDV%(tICy`+:+M","fields":{"VAR":{"id":"cV#jG$.a,HQ;3UBlW=g|"}}}},"ARG1":{"shadow":{"type":"blockMathNumber","id":"{vXFn|HqvC[Av/BkJ}Q_","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"1@.%;W@[(uke0vei-Usg","fields":{"VAR":{"id":"y_#NKZmCwlKk:iC=su@z"}}}},"ARG2":{"shadow":{"type":"blockMathNumber","id":"bU(/W%0*6{W2AHw*K^aF","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"aB]sEK+194c-h-{bFl0J","fields":{"VAR":{"id":"LKO41#Q@9me`6-QJe@#s"}}}},"ARG3":{"shadow":{"type":"blockMathNumber","id":"8/=bTsr`_NjDxo2ASzOL","fields":{"NUM":90}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"R9$v@7c..IgJn!Vs]+Q;","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"n%leD$_R:]QEFKP/BNOy","fields":{"VAR":{"id":"**bHeFrF+W39NKvVXSgL","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"!14te{?XR0!@m=+Vi(x~","fields":{"VALUE0":200}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":";zBXdI]fbtcl.1Qe3xRi","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockPrint","id":"W[UfR]JNf5fefKSy2l^a","extraState":{"optionLevel":1},"fields":{"SEP":"SEP_SPACE"},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"d@3|[-Af@!7::W6PI@]^","fields":{"TEXT":"heading"}}},"TEXT1":{"shadow":{"type":"text","id":"x7?M`bMm2WaF%BI-[Vm)","fields":{"TEXT":"abc"}},"block":{"type":"blockImuGetHeading","id":"y(h{6vxs+XL#/JzXLa.j","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"FxDx8o$I;?E,O3q;Y[hn","fields":{"VAR":{"id":"cV#jG$.a,HQ;3UBlW=g|","name":"prime hub","type":"PrimeHub"}}}}}}}},"next":{"block":{"type":"blockComment","id":"QGFvAQ${`V7x%@TUt;17","fields":{"FIELDNAME":"Test backward turn"},"next":{"block":{"type":"blockDriveBaseDrive2","id":"=VX3*OUs|CWRt}.u!2dz","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"@xFaF/Mfn{z|~wcWwZ)a","fields":{"VAR":{"id":"**bHeFrF+W39NKvVXSgL","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"QY:U3#Q2dwF=gE5e1ph/","fields":{"VALUE0":-200}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"]8ttS_AUm#_,LU{JiMQI","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockImportTaskCallStatement","id":"=Q%qK@uECdhT2!N7A?z5","extraState":{"optionLevel":5},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"(k!{Uq95L-]FnDu$Gq#p","fields":{"VAR":{"id":"/+t;ZvL*9+cOin=inFlS","name":"steer_turn","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"wB+^?,eVFq/hjr|tu_L8","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"N2i4^zr+)PYn.c.BQs,f","fields":{"VAR":{"id":"cV#jG$.a,HQ;3UBlW=g|"}}}},"ARG1":{"shadow":{"type":"blockMathNumber","id":"{vXFn|HqvC[Av/BkJ}Q_","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"_kE%g](s$Z~B@($2#O}U","fields":{"VAR":{"id":"y_#NKZmCwlKk:iC=su@z"}}}},"ARG2":{"shadow":{"type":"blockMathNumber","id":"bU(/W%0*6{W2AHw*K^aF","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":")|SR5hOeKI_g`V,fb`_2","fields":{"VAR":{"id":"LKO41#Q@9me`6-QJe@#s"}}}},"ARG3":{"shadow":{"type":"blockMathNumber","id":"S$O#A+5EG]lSY#EH^DW@","fields":{"NUM":0}}},"ARG4":{"shadow":{"type":"blockMathNumber","id":"X?.vHfY+I$81oR;Kl[@g","fields":{"NUM":0}},"block":{"type":"blockLogicTrueFalse","id":"eW+6xj7;VcPKj1`#Rr0i","fields":{"BOOL":"FALSE"}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"8K14T`7ok.d2bYz#}tlb","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"rDSm@/vLNWa()o0]y==9","fields":{"VAR":{"id":"**bHeFrF+W39NKvVXSgL","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":";M/HX9bEd-YAsF(aEOAr","fields":{"VALUE0":-200}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"LBT8l}R]Y*B=hA{zTVnz","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockPrint","id":"0vx6dAId@5Fj9;XY0IS|","extraState":{"optionLevel":1},"fields":{"SEP":"SEP_SPACE"},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"U+jhPo}-n~s#AE:7nSjh","fields":{"TEXT":"heading"}}},"TEXT1":{"shadow":{"type":"text","id":"x7?M`bMm2WaF%BI-[Vm)","fields":{"TEXT":"abc"}},"block":{"type":"blockImuGetHeading","id":"`3?-0@GTG,P#T:6TUMG}","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"KHtK?m,^yxp*0#@!g+U.","fields":{"VAR":{"id":"cV#jG$.a,HQ;3UBlW=g|","name":"prime hub","type":"PrimeHub"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}]},"variables":[{"name":"red","id":"@rLkg0U8yAOf,K9J`u2?","type":"ColorDef"},{"name":"orange","id":")J}]1l]%7WLZr#U]-fux","type":"ColorDef"},{"name":"yellow","id":"j,JtVK+R^;C#p+1jjC]l","type":"ColorDef"},{"name":"green","id":"S%=U7^pwJY*_v9e[,dfR","type":"ColorDef"},{"name":"cyan","id":"g)Q+8Lx%y6xwak@l8SAl","type":"ColorDef"},{"name":"blue","id":",%m5(mv:1KY-`]nn=Lp/","type":"ColorDef"},{"name":"violet","id":"gJaYpMGa=t^yx+A~Gdmc","type":"ColorDef"},{"name":"magenta","id":"ffC91SS2j.:5.b[tdGu%","type":"ColorDef"},{"name":"white","id":"1Hs?1#:CVs;W*hGZ}6y-","type":"ColorDef"},{"name":"none","id":"0UuVgqGpy5l*)9^jZz/.","type":"ColorDef"},{"name":"drive base","id":"**bHeFrF+W39NKvVXSgL","type":"DriveBase"},{"name":"prime hub","id":"cV#jG$.a,HQ;3UBlW=g|","type":"PrimeHub"},{"name":"left wheel","id":"y_#NKZmCwlKk:iC=su@z","type":"Motor"},{"name":"right wheel","id":"LKO41#Q@9me`6-QJe@#s","type":"Motor"},{"name":"left motor","id":"a_skp~uz0t]beb17^+1K","type":"Motor"},{"name":"right motor","id":"Cy+CR$Qq$t/4xw653]j=","type":"Motor"},{"name":"utility","id":"j;l%-0}YhlUr*R9-?A{!","type":"ModuleImported"},{"name":"steer_turn","id":"/+t;ZvL*9+cOin=inFlS","type":"FunctionImported"}],"info":{"type":"pybricks","version":"1.3.2"}}
from pybricks.hubs import PrimeHub
from pybricks.parameters import Axis, Direction, Port
from pybricks.pupdevices import Motor
from pybricks.robotics import DriveBase

from utility import steer_turn

# Set up all devices.
prime_hub = PrimeHub(top_side=Axis.Z, front_side=Axis.X)
right_wheel = Motor(Port.C, Direction.CLOCKWISE)
left_wheel = Motor(Port.D, Direction.COUNTERCLOCKWISE)
drive_base = DriveBase(left_wheel, right_wheel, 62.4, 80)
left_motor = Motor(Port.B, Direction.COUNTERCLOCKWISE)
right_motor = Motor(Port.F, Direction.COUNTERCLOCKWISE)


# The main program starts here.
drive_base.use_gyro(True)
# Test forward turn
drive_base.straight(200)
steer_turn(prime_hub, left_wheel, right_wheel, 90)
drive_base.straight(200)
print('heading', prime_hub.imu.heading())
# Test backward turn
drive_base.straight(-200)
steer_turn(prime_hub, left_wheel, right_wheel, 0, False)
drive_base.straight(-200)
print('heading', prime_hub.imu.heading())
