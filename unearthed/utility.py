# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":150,"y":100,"deletable":false,"next":{"block":{"type":"variables_setup_any","id":"dBh=t,Vepsz@lB}Swv%%","fields":{"VAR":{"id":"@sdoPik+*%ysi.~a^oeN"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"2?Ea#dUgnG3P~2CPti^c","fields":{"NUM":0}}}},"next":{"block":{"type":"variables_setup_any","id":"7+Lm4lcC*~kn`ARdBogK","fields":{"VAR":{"id":"ndBT|(;=sJ`J:yY5nHga"}},"inputs":{"VALUE0":{"shadow":{"type":"blockMathNumber","id":"n%*Tw=Exj.UIPKA?JjzZ","fields":{"NUM":0}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":130,"y":386,"deletable":false},{"type":"variables_setup_function","id":"ab.Q01%;4H$}S}k9oaJ:","x":640,"y":87,"extraState":{"optionLevel":1},"fields":{"ICON":"SUITCASE","VAR":{"id":"`m9i(a/b}$[_mbBASY~J"}},"inputs":{"ARG0":{"shadow":{"type":"variables_setup_function_argument","id":"(||D2dvGy+YqJj~[QqzG","fields":{"VAR":{"id":"[^TsR8m].R1i$3Z509!)","name":"Angle","type":"FunctionArgument"}}}},"STACK":{"block":{"type":"blockVariableSetValue","id":".3sKt|Rfxj*h@5Q--SgN","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"D4.i@]O8py%u`FkNDLv5","fields":{"VAR":{"id":"ndBT|(;=sJ`J:yY5nHga","name":"repeated","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"SMNJ7P5kjT,;#OV/YC/6","fields":{"NUM":0}}}},"next":{"block":{"type":"blockVariableSetValue","id":"/0,,W75(}Mf/5~+{m:YL","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":",W.Tq,RiH-lxsexQUO7#","fields":{"VAR":{"id":"@sdoPik+*%ysi.~a^oeN","name":"delta heading","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"D=lzP[h,:a|T%ZA{CtoH","fields":{"NUM":0}},"block":{"type":"blockMathArithmetic","id":"p$a$2nx:0KNun_wx2U7R","fields":{"OP":"MINUS"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":")*/z]ACjW}pNSTl}^TNV","fields":{"NUM":1}},"block":{"type":"variables_setup_function_argumentConstant","id":"OGB[41PsCUR!|m{2tf-d","fields":{"VAR":{"text":"Angle"}}}},"B":{"shadow":{"type":"blockMathNumber","id":"N`Jyfw}xdH1yLg+g=S=K","fields":{"NUM":1}},"block":{"type":"blockImuGetHeading","id":"UmTV,([kFI2u;*ZSGIBB","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"r2Ary)vSzCbiCS]M.Er]","fields":{"VAR":{"id":"+D18YnxNodC`x}Oq$|W[","name":"prime hub","type":"PrimeHub"}}}}}}}}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"WG!upsO1_i|f*+Zp5VZL","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"PI@$:dCF3rPt4A3nYuO%","fields":{"VAR":{"id":"JLonE%/$3FhXQ*y_ov^8","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"fR?(^M1;x[qTAu=:+2-j","fields":{"VALUE0":-92}},"block":{"type":"blockMathArithmetic","id":"%Gor/|7vtj[l};xWJDEu","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"3Y(t$s%(nMI;KN={=L,2","fields":{"NUM":1}}},"B":{"shadow":{"type":"blockMathNumber","id":"{f::8~7qB/*SK4fkKJnG","fields":{"NUM":1}},"block":{"type":"blockVariableGetValue","id":"zWR$/@gaW{t_({$Z:hL4","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"koRyP]bwR2|UOrm[*D-7","fields":{"VAR":{"id":"@sdoPik+*%ysi.~a^oeN","name":"delta heading","type":"Any"}}}}}}}}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"SUZD!63Nl;5-HJv|)Lm-","fields":{"VALUE":"Stop.COAST"}}}},"next":{"block":{"type":"blockVariableSetValue","id":"Yr[)M_)|wC:NR#x*av|g","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"xN@ck|1dg_Q8s#Q)OOEl","fields":{"VAR":{"id":"@sdoPik+*%ysi.~a^oeN","name":"delta heading","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"D=lzP[h,:a|T%ZA{CtoH","fields":{"NUM":0}},"block":{"type":"blockMathArithmetic","id":"]69SILsc`z$N(G}$xhSi","fields":{"OP":"MINUS"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":")*/z]ACjW}pNSTl}^TNV","fields":{"NUM":1}},"block":{"type":"variables_setup_function_argumentConstant","id":"g0s*fe3_;(mf4Rj*,T(]","fields":{"VAR":{"text":"Angle"}}}},"B":{"shadow":{"type":"blockMathNumber","id":"N`Jyfw}xdH1yLg+g=S=K","fields":{"NUM":1}},"block":{"type":"blockImuGetHeading","id":"|YJm4}_ilr|na%)MSukE","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"A8a1teEKwJmh06x]]qNP","fields":{"VAR":{"id":"+D18YnxNodC`x}Oq$|W[","name":"prime hub","type":"PrimeHub"}}}}}}}}}}},"next":{"block":{"type":"blockFlowWhile","id":"DY~whd;$o.$qpE7qbBsH","fields":{"MODE":"UNTIL"},"inputs":{"BOOL":{"shadow":{"type":"blockLogicTrue","id":"M^5n!lQ6$a3oDK24vFO!"},"block":{"type":"blockLogicCompareDouble","id":"X#i4+LtECE$RE1?`$UUA","fields":{"OP1":"LTE","OP2":"LTE"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"h=Ha-spiDC43z_mw@KTj","fields":{"NUM":-2}}},"B":{"shadow":{"type":"blockMathNumber","id":"o34Pq:9WjatF7:moW=hz","fields":{"NUM":4}},"block":{"type":"blockVariableGetValue","id":"MwlQp(uHAnNhPuj9ne_`","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"}z/+fi;){S!;}CoM.-DD","fields":{"VAR":{"id":"@sdoPik+*%ysi.~a^oeN","name":"delta heading","type":"Any"}}}}}}},"C":{"shadow":{"type":"blockMathNumber","id":",GNR=Pr*r.x3,FK%*z`p","fields":{"NUM":2}}}}}},"DO":{"block":{"type":"blockVariableSetValue","id":"lF/mJM/xXDv,=D?_%9r)","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"n/)[OA):4JBM0VX*#Hta","fields":{"VAR":{"id":"ndBT|(;=sJ`J:yY5nHga","name":"repeated","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"Tlft5z%p;f1|C+AN817|","fields":{"NUM":0}},"block":{"type":"blockMathArithmetic","id":"}|uqCTubVms20l5T5v+R","fields":{"OP":"ADD"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"VFQU[g):W[eT_+.R`@6t","fields":{"NUM":1}},"block":{"type":"blockVariableGetValue","id":"ZOO8BM@ME/#{P`kX1p/N","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"O6*NH`,~#zC+p-0Sd:SL","fields":{"VAR":{"id":"ndBT|(;=sJ`J:yY5nHga","name":"repeated","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"{f::8~7qB/*SK4fkKJnG","fields":{"NUM":1}}}}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"q$p,HkLnQn{r[g`]`lx3","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"9ji%VhK/Y^x:8Vsoadu3","fields":{"VAR":{"id":"JLonE%/$3FhXQ*y_ov^8","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"fR?(^M1;x[qTAu=:+2-j","fields":{"VALUE0":-92}},"block":{"type":"blockMathArithmetic","id":"A=|G.-rLoK;TgScC4[wr","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"f`.^92/]!wD8B;ED}rfi","fields":{"NUM":1.5}}},"B":{"shadow":{"type":"blockMathNumber","id":"f+BBtdj.md9PP5O1p7P!","fields":{"NUM":1}},"block":{"type":"blockVariableGetValue","id":"AYq@f^U98Kv/tf[u%+Fn","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"Xzbv9N4.E=r?no}+:@T7","fields":{"VAR":{"id":"@sdoPik+*%ysi.~a^oeN","name":"delta heading","type":"Any"}}}}}}}}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"_~@#LHZrNhzvtQr8/^Iv","fields":{"VALUE":"Stop.COAST"}}}},"next":{"block":{"type":"blockVariableSetValue","id":"HC!+PUah:[*Y3:Ctng}z","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"=LeSPX:YK5m2{rM_~VV^","fields":{"VAR":{"id":"@sdoPik+*%ysi.~a^oeN","name":"delta heading","type":"Any"}}}},"VALUE0":{"shadow":{"type":"blockMathNumber","id":"D=lzP[h,:a|T%ZA{CtoH","fields":{"NUM":0}},"block":{"type":"blockMathArithmetic","id":"rqH|%,|?LK3=M)Fqo[)8","fields":{"OP":"MINUS"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":")*/z]ACjW}pNSTl}^TNV","fields":{"NUM":1}},"block":{"type":"variables_setup_function_argumentConstant","id":"=Ucnzc-P:9lC#RPP_F(E","fields":{"VAR":{"text":"Angle"}}}},"B":{"shadow":{"type":"blockMathNumber","id":"N`Jyfw}xdH1yLg+g=S=K","fields":{"NUM":1}},"block":{"type":"blockImuGetHeading","id":"!VTTnvRwQXhmCV)kula%","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"I*dbXJTC,m0j6J-~so+9","fields":{"VAR":{"id":"+D18YnxNodC`x}Oq$|W[","name":"prime hub","type":"PrimeHub"}}}}}}}}}}},"next":{"block":{"type":"blockIfElse","id":"lv%0SO-MRr.%kTUq$Q:=","extraState":{"optionLevel":0},"inputs":{"IF0":{"shadow":{"type":"blockLogicTrue","id":"RO5*FencukLYeW-wAYHR"},"block":{"type":"blockLogicCompare","id":"vM]TYL8)F-.sG+)Q|NuL","fields":{"OP1":"GT"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"ldW!88LNJjlS5~$y{No.","fields":{"NUM":3}},"block":{"type":"blockVariableGetValue","id":"`9cAQ1_Wi[o.qB}/yB!}","inputs":{"VAR":{"shadow":{"type":"variables_get_any","id":"miN8?uhL?hWfxb^$k!=v","fields":{"VAR":{"id":"ndBT|(;=sJ`J:yY5nHga","name":"repeated","type":"Any"}}}}}}},"B":{"shadow":{"type":"blockMathNumber","id":"C40GBB7{`Ti;txjet$pv","fields":{"NUM":3}}}}}},"DO0":{"block":{"type":"blockFlowBreakContinue","id":"y`LWpuC}o2D(vEX!~)EA","fields":{"FLOW":"BREAK"}}}}}}}}}}}}}}}}}}}}}}}}}]},"variables":[{"name":"red","id":"qBY.f!ABn8GHhT-2q/Es","type":"ColorDef"},{"name":"orange","id":"=NU{EMe2uK%KQPwe]ys?","type":"ColorDef"},{"name":"yellow","id":"q0[VA(JW!?3r4UaW-YvU","type":"ColorDef"},{"name":"green","id":"Sw_9~xs4#{7Yv?Tbh,wx","type":"ColorDef"},{"name":"cyan","id":"X?|8xwveyGX#|`sSmPe)","type":"ColorDef"},{"name":"blue","id":"A4?gmq~+Mz8Lz5ZYf3ic","type":"ColorDef"},{"name":"violet","id":"s[a@e[}4/m9N!OMm?;,M","type":"ColorDef"},{"name":"magenta","id":"v|t8{dNg}-=G*C0vg,:G","type":"ColorDef"},{"name":"white","id":"-v7i-$CJW^I75g(1%Plw","type":"ColorDef"},{"name":"none","id":"bsp6{E.-S+k5s|p^Luau","type":"ColorDef"},{"name":"prime hub","id":"+D18YnxNodC`x}Oq$|W[","type":"PrimeHub"},{"name":"drive base","id":"JLonE%/$3FhXQ*y_ov^8","type":"DriveBase"},{"name":"repeated","id":"ndBT|(;=sJ`J:yY5nHga","type":"Any"},{"name":"delta heading","id":"@sdoPik+*%ysi.~a^oeN","type":"Any"},{"name":"AccurateTurn","id":"`m9i(a/b}$[_mbBASY~J","type":"Function"},{"name":"Angle","id":"[^TsR8m].R1i$3Z509!)","type":"FunctionArgument"}],"info":{"type":"pybricks","version":"1.3.2"}}
from pybricks.parameters import Stop

# Initialize variables.
delta_heading = 0
repeated = 0

def AccurateTurn(Angle):
    global repeated, delta_heading
    repeated = 0
    delta_heading = Angle - prime_hub.imu.heading()
    drive_base.turn(1 * delta_heading, then=Stop.COAST)
    delta_heading = Angle - prime_hub.imu.heading()
    while not -2 <= delta_heading <= 2:
        repeated = repeated + 1
        drive_base.turn(1.5 * delta_heading, then=Stop.COAST)
        delta_heading = Angle - prime_hub.imu.heading()
        if repeated > 3:
            break


# The main program starts here.
