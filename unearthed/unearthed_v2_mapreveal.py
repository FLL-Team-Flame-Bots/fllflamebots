# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":137,"y":-4,"deletable":false,"next":{"block":{"type":"variables_set_prime_hub","id":"|8f$8HsHe]n6)*oQj*Nx","extraState":{"optionLevel":1},"fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}"}},"inputs":{"AXIS_TOP":{"shadow":{"type":"blockParametersAxis","id":"xv9O:#GyIgvoObf?zI7G","fields":{"VALUE":"z"}}},"AXIS_FRONT":{"shadow":{"type":"blockParametersAxis","id":"U},UE/||$S{:E]r!RDY}","fields":{"VALUE":"x"}}}},"next":{"block":{"type":"variables_set_motor","id":"oo[nFj(dqU|Nl9d:c,$V","fields":{"VAR":{"id":"sqag6!{v6[a+3j:oW796"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"2_U.m9fw5E}1,vAqFWUn","fields":{"NAME":"D"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"ZY/(NZ^EhRe}5^=RaK.)","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"O]$OzY0yT1RU[0LGT;i^","fields":{"VAR":{"id":",A}mQ(##i[HsqlX;/U(#"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"@9Nae_C@N_)9loSOkVDL","fields":{"NAME":"C"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"Asov8sEUOQV77HkAl6_d","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"YoDtlv/-Z6lWv?%(q)[S","fields":{"VAR":{"id":"t1)=*b*Bq_g8H]J[Ed@I"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"hh0B_#pNa4WbC/;,qhy#","fields":{"NAME":"B"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"k]YM6q}%[xgP5Jmoyqg+","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"U:H0v2JZ`b(-jD7mG.WW","fields":{"VAR":{"id":"s~MX{KiJ-Ek|Hr7Rhcb8"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"?1saDZm,+3^cJdgIs)%W","fields":{"NAME":"F"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"QQO0b|f}CO`s65xAb`^1","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_drive_base","id":"*|UPax^}l]x,aYnz}SE*","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc"}},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"xf;z!alcuC}3u9lMUBYD","fields":{"VAR":{"id":"sqag6!{v6[a+3j:oW796","name":"leftwheel","type":"Motor"}}}},"VAR2":{"shadow":{"type":"variables_get_motor_device","id":"Er%$(fi7[3cOVs_Z-QDC","fields":{"VAR":{"id":",A}mQ(##i[HsqlX;/U(#","name":"rightwheel","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_distance","id":"BhEZ2{Jz(OU^nKx5m64V","fields":{"VALUE0":62.4}}},"VALUE1":{"shadow":{"type":"unit_distance","id":"JTwPMEO[%Ml:8l{E(/XF","fields":{"VALUE0":80}}}},"next":{"block":{"type":"variables_setup_imported_function","id":"}1XRj5/^49p3Ca3(^E`h","fields":{"FROM_MODULE":{"id":"*T?yj*?GqSP-)LE)5NTp"},"VAR":{"id":"1vgfIVRY@*o;c)cP/w+a"}},"next":{"block":{"type":"variables_setup_imported_function","id":"Yk6tvJTXGPDG!f4l{c16","fields":{"FROM_MODULE":{"id":"*T?yj*?GqSP-)LE)5NTp"},"VAR":{"id":",cn5aK_2b.rc:y^@fr3!"}},"next":{"block":{"type":"variables_set_stopwatch","id":"i:GePG]`Yypj#wz9-[wL","fields":{"VAR":{"id":"o-@E-cWCCssQ27e=^`-c"}}}}}}}}}}}}}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":138,"y":550,"deletable":false,"next":{"block":{"type":"blockDriveBaseDrive2","id":"Au[A7Z8@!_St:egMed%R","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"v*{p,8*09`m2.8^v~qoF","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"rpHo%cp}p5PSfBQTr%%u","fields":{"VALUE0":-10}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"fWEVLvqJ:ER8{:@J1y*%","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseResetWithValues","id":"PW57KjV)?iQe+B6t71E}","inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"8}MnsV-ojpKEowc$bKWV","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"VALUE0":{"shadow":{"type":"unit_distance","id":"Iu!RdD=`tbMx0*d{:uS5","fields":{"VALUE0":0}}},"VALUE1":{"shadow":{"type":"unit_angle","id":"hW4Vyd+f/=xrk_dPX$m:","fields":{"VALUE0":0}}}},"next":{"block":{"type":"blockDriveBaseUseGyro","id":"6U=t^Lb.CXlMVn:({]xK","fields":{"METHOD":"DRIVEBASE_USE_GYRO_TRUE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"3|6D4-`Bcf~e`oS/+Ojb","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}}},"next":{"block":{"type":"blockStopWatchDo","id":"D#m[7cCS`pv)W[q#D2w9","extraState":{"optionLevel":0},"fields":{"METHOD":"STOPWATCH_RESET"},"inputs":{"VAR":{"shadow":{"type":"variables_get_stopwatch","id":"U3ol%m`([wrC32=gqf?x","fields":{"VAR":{"id":"o-@E-cWCCssQ27e=^`-c","name":"stopwatch","type":"StopWatch"}}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"9_yg+P+:x1h7:e#1$lXb","extraState":{"optionLevel":1},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_SPEED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":";/9|^_b{d9RfUz8bH;:8","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_speed","id":"1T7%Bjxi[Y8PW}$N4CM$","fields":{"VALUE0":600}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"@VfxaP!phls2=c`pJuRB","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"tbusanKPsE:Yo=8ei=)H","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_acceleration","id":"JJ|vmeS?!wp{(B)toea#","fields":{"VALUE0":400}}}},"next":{"block":{"type":"blockMultiTask","id":"P9I4x#7(5m_/=_OM8ySt","extraState":{"optionLevel":1},"fields":{"METHOD":"MULTITASK_ALL"},"inputs":{"TASK0":{"block":{"type":"blockDriveBaseDrive2","id":"mp?h]1+N;*{xTN}()xO*","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"lc$M)_o3U*v(n}kc`E/B","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":")USZKhV.^$)@U*$k@9!4","fields":{"VALUE0":620}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"QH-d.uFVvx+Oix4]h03|","fields":{"VALUE":"Stop.HOLD"}}}}}},"TASK1":{"block":{"type":"blockMotorRun","id":"%+JsORK^B.i[[s!K~q{F","extraState":{"optionLevel":3},"fields":{"METHOD":"MOTOR_RUN_UNTIL_STALLED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"^yJ@9TiVP%ZjLGqQWm(5","fields":{"VAR":{"id":"s~MX{KiJ-Ek|Hr7Rhcb8","name":"rightattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"x5#;XO/Ln*a+g@s;8En4","fields":{"VALUE0":-500}}},"LIMIT":{"shadow":{"type":"unit_percent","id":"TSh,gfd8V#+7lPhrENZa","fields":{"VALUE0":50}}},"THEN":{"shadow":{"type":"parameters_stop_3","id":"*[^9i2a)~RWjydtGQn+Q","fields":{"VALUE":"Stop.COAST"}}}},"next":{"block":{"type":"blockMotorResetAngle","id":"D-$od):A8rz%,R~*l1}`","inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":":)*R|XM7oI/[6DmlZm!w","fields":{"VAR":{"id":"s~MX{KiJ-Ek|Hr7Rhcb8","name":"rightattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angle","id":"B?1n2pS}Omi~Azpp4d,(","fields":{"VALUE0":0}}}}}}}},"TASK2":{"block":{"type":"blockMotorRun","id":".a(+bzS!+vhOQ^q@n=v#","extraState":{"optionLevel":3},"fields":{"METHOD":"MOTOR_RUN_UNTIL_STALLED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"uVM4^reJc6H}H%j}=A!4","fields":{"VAR":{"id":"t1)=*b*Bq_g8H]J[Ed@I","name":"leftattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"f=@bP(4qH}V.u:[2gb4@","fields":{"VALUE0":-1000}}},"LIMIT":{"shadow":{"type":"unit_percent","id":"MZ_}zw8x/#:-GGJ{-1zv","fields":{"VALUE0":50}}},"THEN":{"shadow":{"type":"parameters_stop_3","id":"XfzI9R?{o)]Zd?neSI~}","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockMotorResetAngle","id":"QT!#`ifw#eJf2p+me4#R","inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"0{sdACBpi3^}3,FW2_;Z","fields":{"VAR":{"id":"t1)=*b*Bq_g8H]J[Ed@I","name":"leftattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angle","id":"a%s2n:]ytP3#(D4Le2t#","fields":{"VALUE0":0}}}}}}}}},"next":{"block":{"type":"blockImportTaskCallStatement","id":"ln1y!CW,%Cjk|VIi;HWA","extraState":{"optionLevel":4},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"QRJ}pw@JTRO`R54CW@XB","fields":{"VAR":{"id":"1vgfIVRY@*o;c)cP/w+a","name":"steer_turn","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"2fS`JI($#AUlT5xfI,zg","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"e/#1|AuWF]m;O#:jQZ3S","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}"}}}},"ARG1":{"shadow":{"type":"blockMathNumber","id":"~,T)_U`{l%@Mp@8so)`/","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"y_ejsHo?Sq~kJP?u87lC","fields":{"VAR":{"id":"sqag6!{v6[a+3j:oW796"}}}},"ARG2":{"shadow":{"type":"blockMathNumber","id":"bl$#ml:|m)P$@INhiJ.]","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"y-~.fKwWRNr45%=KM5!/","fields":{"VAR":{"id":",A}mQ(##i[HsqlX;/U(#"}}}},"ARG3":{"shadow":{"type":"blockMathNumber","id":"A;6ChZa0a(./#zFkHRl(","fields":{"NUM":-90}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"3#;wvBv;p+*A(bBC0$S8","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"+Cu0y}m*/o%Au.(}/;|F","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"@`G|)R`k)3(Pe]aZ=H70","fields":{"VALUE0":90}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"L7WFLCO|VRqYec}df?M[","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockPrint","id":"0;3jb#PEIkUS`cBgS%6:","extraState":{"optionLevel":1},"fields":{"SEP":"SEP_COMMA_SPACE"},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"}d)U*X_g-nBzD?b)Kii:","fields":{"TEXT":"Heading after moving to mission 1"}}},"TEXT1":{"shadow":{"type":"text","id":"U@}zBof6u}vs]I8`l:^1","fields":{"TEXT":"abc"}},"block":{"type":"blockImuGetHeading","id":"Tt^JhPu(2jKhU`nG(o[u","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"dn.C+}z|k?S{-wNDPGZ(","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}","name":"prime hub","type":"PrimeHub"}}}}}}}},"next":{"block":{"type":"blockComment","id":"M36nA4@fB0z#0i$|k{x#","fields":{"FIELDNAME":"Left attachment going down to pick up brush and open deposit"},"next":{"block":{"type":"blockMultiTask","id":"$XBTL,XukgH7|2Ks@ASE","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_RACE"},"inputs":{"TASK0":{"block":{"type":"blockMotorRun","id":"w0(,@}/]K$91|do[GO-S","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"}-oWt/E`4XluxT+F]MqW","fields":{"VAR":{"id":"t1)=*b*Bq_g8H]J[Ed@I","name":"leftattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"^hAJYo,kj[+X*X)gcuNJ","fields":{"VALUE0":750}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"-MtJexZ4dhWsT;~hn~5A","fields":{"VALUE0":1200}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"HP,A%A3i@ZG}6GW9=uC*","fields":{"VALUE":"Stop.COAST"}}}}}},"TASK1":{"block":{"type":"blockImportTaskCallStatement","id":"|`?rS%V~wD2E[M.[Va_L","extraState":{"optionLevel":2},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"~glyP^2gocp/`f:ca@Gz","fields":{"VAR":{"id":",cn5aK_2b.rc:y^@fr3!","name":"timeout","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"J[9;|R6gdJLr@ls(LO?A","fields":{"NUM":3000}}},"ARG1":{"shadow":{"type":"blockMathNumber","id":"1yMkLZQ.*-p;E8:9?b,D","fields":{"NUM":"0"}},"block":{"type":"blockTextLiteral","id":"3/eW?(~tpipd,a?n+g4c","fields":{"TEXT":"brushing timeout"}}}}}}},"next":{"block":{"type":"blockMotorRun","id":"]y(~l$MI|AZ?-6^i4R8[","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"KTKUuZvFq~1kTDvV2~^/","fields":{"VAR":{"id":"t1)=*b*Bq_g8H]J[Ed@I","name":"leftattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"+.sswwqxqxFWXbf^u@vn","fields":{"VALUE0":600}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"P{~_`^~yVVdYRYc|I^YB","fields":{"VALUE0":-1200}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"TmRC440SlPi.d#FeY,W{","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockComment","id":"5+WKm)D-)@ZlIi$$/K{6","fields":{"FIELDNAME":"Back off from mission 1, turn to -45, moving to mission2"},"next":{"block":{"type":"blockDriveBaseDrive2","id":"do,xdyF])I]`19wV}|M)","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"GK1XQqrG/7DCIqu9XCJ3","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"9i?%vf4pr#Q6/R,R32m+","fields":{"VALUE0":-90}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"dTWpZbDGt$Y*nl@pEg{0","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockImportTaskCallStatement","id":"EBZF{tLt)X7K|.A}zoK7","extraState":{"optionLevel":4},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"V.@1B[knujQTJ}@OhKW*","fields":{"VAR":{"id":"1vgfIVRY@*o;c)cP/w+a","name":"steer_turn","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"2fS`JI($#AUlT5xfI,zg","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"WGD]Pd2?!0kf[]7dL,]3","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}"}}}},"ARG1":{"shadow":{"type":"blockMathNumber","id":"~,T)_U`{l%@Mp@8so)`/","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"6`%uz+^NvG69D_{^pWMF","fields":{"VAR":{"id":"sqag6!{v6[a+3j:oW796"}}}},"ARG2":{"shadow":{"type":"blockMathNumber","id":"bl$#ml:|m)P$@INhiJ.]","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"F]~7zn?3j7A2A+q1U-aV","fields":{"VAR":{"id":",A}mQ(##i[HsqlX;/U(#"}}}},"ARG3":{"shadow":{"type":"blockMathNumber","id":"P$Ao%B!p3UZQ|6GlYR7U","fields":{"NUM":-45}}}},"next":{"block":{"type":"blockPrint","id":"{^Tu,jqsMGe7Cs$:PmwP","extraState":{"optionLevel":1},"fields":{"SEP":"SEP_COMMA_SPACE"},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"}$d+e5q;B=Kx+Q*2CFuf","fields":{"TEXT":"turning to map"}}},"TEXT1":{"shadow":{"type":"text","id":"buuewkUOV|[/G_2EER!u","fields":{"TEXT":"abc"}},"block":{"type":"blockImuGetHeading","id":"|{sX4J!o;nv-4?J+Yr3T","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"Ln#3?`WBbs,:4FDf{5)9","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}","name":"prime hub","type":"PrimeHub"}}}}}}}},"next":{"block":{"type":"blockMultiTask","id":"z,6~~laesXWyLQbo7r(S","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_RACE"},"inputs":{"TASK0":{"block":{"type":"blockDriveBaseConfigure","id":"u.4L943JMpMGt3Z~~v]e","extraState":{"optionLevel":1},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_SPEED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"x!G]l!UBaCVU:iPQ[g.3","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_speed","id":",X{lwSDlv/|mC0lSov`*","fields":{"VALUE0":400}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"d|60_AEc@y.u!k.2VksJ","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"x!-]CYQ_GV=tI+P:}RcO","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_acceleration","id":"O377AW{jO3:Jkb(X$n^!","fields":{"VALUE0":300}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"VwPRGg}q^b:pdGz}/0nJ","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"-nKeK:.0}OyGF]QkCv8N","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"jh8F.d~q7DO,]^11%A5o","fields":{"VALUE0":70}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"m@6F.7L+Kf%y1l8]Cf9-","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockMultiTask","id":"AP{aU_,U!crq)5:;7=7W","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_ALL"},"inputs":{"TASK0":{"block":{"type":"blockMotorRun","id":"[70%1T$de(9pZ[-*Z1Jq","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":".IY07GK^%z`$b[^9*XT/","fields":{"VAR":{"id":"s~MX{KiJ-Ek|Hr7Rhcb8","name":"rightattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"lip*dIgLrh6.%1K@JGT*","fields":{"VALUE0":500}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"X;gZs0}^X35E{hi!6;,.","fields":{"VALUE0":180}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"|@rJ^jQ.?n1]upVl]2C4","fields":{"VALUE":"Stop.HOLD"}}}}}},"TASK1":{"block":{"type":"blockWaitTime","id":".,gTCsS1E#LTzLxOlGcD","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"u[h2}}n_3,5#8~mv|cmr","fields":{"VALUE0":500}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"Elw2FPdkyRheWU@`3/@P","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"(ZJ~2@xJl_7pgk1ZI6DB","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"8,F5fS1[QP[,MTACfzd9","fields":{"VALUE0":170}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"-Z9l}@[;Mn]p8`fK%]]q","fields":{"VALUE":"Stop.COAST"}}}}}}}}}}}}}}}}},"TASK1":{"block":{"type":"blockImportTaskCallStatement","id":"O@~K_D]d{j$v)#JcUT1R","extraState":{"optionLevel":2},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"Qcf_vg*#@;r0LlYF9cp+","fields":{"VAR":{"id":",cn5aK_2b.rc:y^@fr3!","name":"timeout","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"=K)wsq)vy8I~za;v./MM","fields":{"NUM":4000}}},"ARG1":{"shadow":{"type":"blockMathNumber","id":"{47t`sR@)je186wWp/Ui","fields":{"NUM":0}},"block":{"type":"blockTextLiteral","id":"v#gT=A[B@d|O-CrdE7i7","fields":{"TEXT":"mapreveal timeout"}}}}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"#}mQK8R[.{]#;7^~j+#H","extraState":{"optionLevel":1},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_SPEED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"VJf^NgQrJj]4hP{_h)vt","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_speed","id":"7%RPVP3;=_tbG7mG,DFC","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"mjEv/0EZXkK.^vB12Xs?","extraState":{"optionLevel":1},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_SPEED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"L%ig{tt!E]%3Tndk[VC]","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_speed","id":"Wo[5#YBDpVm(X%=Fc;bX","fields":{"VALUE0":750}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"HW%b5jFvq0RDQF(JS6M|","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_TURN_RATE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"]rOxzCou}bwJI3d]-gzy","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angularVelocity","id":"7,n;QW*LYB^4URH)ZZ8Q","fields":{"VALUE0":360}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"h+!*e)c6%#oL)Og=kqwy","extraState":{"optionLevel":4},"fields":{"METHOD":"DRIVEBASE_TURN_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"m1y?xTc!!Kt9O0J`;qn5","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angularAcceleration","id":"G^(-`[f4h{OBOh1g/1lJ","fields":{"VALUE0":750}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"Ia5nazpI2]kg[6!xuXtY","extraState":{"optionLevel":5},"fields":{"METHOD":"DRIVEBASE_DRIVE_ARC_DISTANCE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"|tyxz8#VW)M$#cFnv;/4","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"zx+W`$0RWKo9MQZ8v/:[","fields":{"VALUE0":-500}}},"ARG1":{"shadow":{"type":"unit_distance","id":"d3s`02$DhuA79.R-upct","fields":{"VALUE0":-1000}}},"ARG2":{"shadow":{"type":"parameters_stop_4","id":"/dt+*53?JD4#e//ayER6","fields":{"VALUE":"Stop.COAST"}}}},"next":{"block":{"type":"blockPrint","id":"{Y$qn$UJl_YXUavH7GT=","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"ir`emE|N+g7uVRaechI]","fields":{"TEXT":"abc"}},"block":{"type":"blockStopWatchTime","id":"@R:]f9K/)1CkWaN+[eKi","inputs":{"VAR":{"shadow":{"type":"variables_get_stopwatch","id":"#.09_E6joGlx2$!0qQ*)","fields":{"VAR":{"id":"o-@E-cWCCssQ27e=^`-c","name":"stopwatch","type":"StopWatch"}}}}}}}},"next":{"block":{"type":"blockPrint","id":"Xt*v-J173Y|[u#T)Oh2/","extraState":{"optionLevel":1},"fields":{"SEP":"SEP_COMMA_SPACE"},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"jzM(3.~5nL{t`ZJ,+.Gv","fields":{"TEXT":"battery"}}},"TEXT1":{"shadow":{"type":"text","id":"4X3o%@t~_bHLZ*7Vod~W","fields":{"TEXT":"abc"}},"block":{"type":"blockBatteryMeasure","id":"gzaoB=z+la3*Y|BKA5KB","extraState":{"optionLevel":0},"fields":{"METHOD":"BATTERY_GET_VOLTAGE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_battery_hub","id":"d!$voANFEd_%KtRW.YN4","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}","name":"prime hub","type":"PrimeHub"}}}}}}}},"next":{"block":{"type":"blockDriveBaseStop","id":"9zb4(:tn+k/n_=5KlVi_","inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"DIEApFu^d_Jt+2%V4Nk^","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"c%yp*22RKSRNN(50+!}x","fields":{"VALUE":"Stop.COAST"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},{"type":"blockDriveBaseDrive2","id":"`o^r;,+`$nY@x0M1(SKG","x":899,"y":2173,"enabled":false,"extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"UwV6V.`W8XTH8(7,N@W]","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"Mo-QHm(nX;9Joa6tV:`I","fields":{"VALUE0":-270}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":")RS=UM9mR?5vJ(vD8pYB","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"5P]!XwF^xqCTZPFlM91x","enabled":false,"extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"7w{y0s:lB3V]eF58YYA`","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"it~7*yi*E(}%4((b[Kai","fields":{"VALUE0":60}},"block":{"type":"blockMathArithmetic","id":"kCFEhRrL`JhXH`it+OJv","fields":{"OP":"MINUS"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":":`]aH@$0cH;r6C04w!6S","fields":{"NUM":15}}},"B":{"shadow":{"type":"blockMathNumber","id":"?h/rI50Xx/0z|1-1Z:5e","fields":{"NUM":1}},"block":{"type":"blockImuGetHeading","id":"t}`4ah:Fk^6;s5ku]-%~","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"97e%qB[:AaoL[/KCFtHE","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}","name":"prime hub","type":"PrimeHub"}}}}}}}}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"Z{LjM=;{vlbb|~6v9V*i","fields":{"VALUE":"Stop.COAST"}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"TEm;T3;ZY8Wd^Xj9~hG#","enabled":false,"extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"?`{H~0sUEIvyK_9dK_Y]","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"tcS6jB$DY81gCL9Qn6TD","fields":{"VALUE0":-700}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"txL(K/~}!c*QLN)_Fj@l","fields":{"VALUE":"Stop.HOLD"}}}}}}}}},{"type":"blockDriveBaseDrive2","id":"%q{Ea/pjbR0Q4N_zoAy:","x":941,"y":641,"enabled":false,"extraState":{"optionLevel":5},"fields":{"METHOD":"DRIVEBASE_DRIVE_ARC_DISTANCE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"[-VH`fwwgsa{?I|S~((R","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"Nhc;2`OelcVtfE==4!0f","fields":{"VALUE0":-400}}},"ARG1":{"shadow":{"type":"unit_distance","id":");^dogZY%Y9Fjf|kTwV$","fields":{"VALUE0":-1000}}},"ARG2":{"shadow":{"type":"parameters_stop_4","id":"f!-K]6_8zJKwxhaZlN/Y","fields":{"VALUE":"Stop.HOLD"}}}}}]},"variables":[{"name":"red","id":"7bN]Jb0AqU*yv?HJ^1v_","type":"ColorDef"},{"name":"orange","id":";2RV-8tUD*TO@gfq}BkI","type":"ColorDef"},{"name":"yellow","id":"yqe5}*:V1LGFJ,i6SK`c","type":"ColorDef"},{"name":"green","id":"??s:XiPmC~,1]zDeNFtI","type":"ColorDef"},{"name":"cyan","id":"%P-Exd2nUZETePShq(po","type":"ColorDef"},{"name":"blue","id":"r5(Pu*AC#LLH)g_i3-f5","type":"ColorDef"},{"name":"violet","id":"^|`Izt[%tAzuwC^4A=Sn","type":"ColorDef"},{"name":"magenta","id":"f2ohpSd/o4?JpXl6lc9d","type":"ColorDef"},{"name":"white","id":"|1eb2eTkco;~%aDc]qi~","type":"ColorDef"},{"name":"none","id":"kAhK;yKJmiO1Hs?xl,y:","type":"ColorDef"},{"name":"prime hub","id":"B8==mMS.yb{H+|hfu.D}","type":"PrimeHub"},{"name":"drive base","id":"xYXBbuK+}hS#pUuM-BEc","type":"DriveBase"},{"name":"item","id":"%+1Qcb@V][B+d}1?0*pv","type":"LoopVariable"},{"name":"stopwatch","id":"o-@E-cWCCssQ27e=^`-c","type":"StopWatch"},{"name":"utility","id":"*T?yj*?GqSP-)LE)5NTp","type":"ModuleImported"},{"name":"steer_turn","id":"1vgfIVRY@*o;c)cP/w+a","type":"FunctionImported"},{"name":"timeout","id":",cn5aK_2b.rc:y^@fr3!","type":"FunctionImported"},{"name":"external task","id":"/fxek4wpjWAB/ZiRu3`P","type":"FunctionImported"},{"name":"leftwheel","id":"sqag6!{v6[a+3j:oW796","type":"Motor"},{"name":"rightwheel","id":",A}mQ(##i[HsqlX;/U(#","type":"Motor"},{"name":"leftattachment","id":"t1)=*b*Bq_g8H]J[Ed@I","type":"Motor"},{"name":"rightattachment","id":"s~MX{KiJ-Ek|Hr7Rhcb8","type":"Motor"},{"name":"motor","id":"RP9G]Sel1W~#*wqtfp4Y","type":"Motor"}],"info":{"type":"pybricks","version":"1.3.2"}}
from pybricks.hubs import PrimeHub
from pybricks.parameters import Axis, Direction, Port, Stop
from pybricks.pupdevices import Motor
from pybricks.robotics import DriveBase
from pybricks.tools import StopWatch, multitask, run_task, wait

from utility import steer_turn, timeout

# Set up all devices.
prime_hub = PrimeHub(top_side=Axis.Z, front_side=Axis.X)
stopwatch = StopWatch()
leftwheel = Motor(Port.D, Direction.COUNTERCLOCKWISE)
rightwheel = Motor(Port.C, Direction.CLOCKWISE)
leftattachment = Motor(Port.B, Direction.COUNTERCLOCKWISE)
rightattachment = Motor(Port.F, Direction.COUNTERCLOCKWISE)
drive_base = DriveBase(leftwheel, rightwheel, 62.4, 80)

async def subtask():
    await rightattachment.run_until_stalled(-500, Stop.COAST, 50)
    rightattachment.reset_angle(0)

async def subtask2():
    await leftattachment.run_until_stalled(-1000, Stop.HOLD, 50)
    leftattachment.reset_angle(0)

async def subtask3():
    await wait(500)
    await drive_base.straight(170, then=Stop.COAST)

async def subtask4():
    drive_base.settings(straight_speed=400)
    drive_base.settings(straight_acceleration=300)
    await drive_base.straight(70)
    await multitask(
        rightattachment.run_angle(500, 180),
        subtask3(),
    )

async def main():
    await drive_base.straight(-10)
    drive_base.reset(0, 0)
    drive_base.use_gyro(True)
    stopwatch.reset()
    drive_base.settings(straight_speed=600)
    drive_base.settings(straight_acceleration=400)
    await multitask(
        drive_base.straight(620),
        subtask(),
        subtask2(),
    )
    await steer_turn(prime_hub, leftwheel, rightwheel, -90)
    await drive_base.straight(90)
    print('Heading after moving to mission 1', prime_hub.imu.heading(), sep=", ")
    # Left attachment going down to pick up brush and open deposit
    await multitask(
        leftattachment.run_angle(750, 1200, Stop.COAST),
        timeout(3000, 'brushing timeout'),
        race=True,
    )
    await leftattachment.run_angle(600, -1200)
    # Back off from mission 1, turn to -45, moving to mission2
    await drive_base.straight(-90)
    await steer_turn(prime_hub, leftwheel, rightwheel, -45)
    print('turning to map', prime_hub.imu.heading(), sep=", ")
    await multitask(
        subtask4(),
        timeout(4000, 'mapreveal timeout'),
        race=True,
    )
    drive_base.settings(straight_speed=1000)
    drive_base.settings(straight_speed=750)
    drive_base.settings(turn_rate=360)
    drive_base.settings(turn_acceleration=750)
    await drive_base.arc(-500, distance=-1000, then=Stop.COAST)
    print(stopwatch.time())
    print('battery', prime_hub.battery.voltage(), sep=", ")
    drive_base.stop()


run_task(main())