# pybricks blocks file:{"blocks":{"languageVersion":0,"blocks":[{"type":"blockGlobalSetup","id":"bjK,wS1MYO7aiYkFSwd{","x":137,"y":-4,"deletable":false,"next":{"block":{"type":"variables_set_prime_hub","id":"|8f$8HsHe]n6)*oQj*Nx","extraState":{"optionLevel":1},"fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}"}},"inputs":{"AXIS_TOP":{"shadow":{"type":"blockParametersAxis","id":"xv9O:#GyIgvoObf?zI7G","fields":{"VALUE":"z"}}},"AXIS_FRONT":{"shadow":{"type":"blockParametersAxis","id":"U},UE/||$S{:E]r!RDY}","fields":{"VALUE":"x"}}}},"next":{"block":{"type":"variables_set_motor","id":"oo[nFj(dqU|Nl9d:c,$V","fields":{"VAR":{"id":"sqag6!{v6[a+3j:oW796"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"2_U.m9fw5E}1,vAqFWUn","fields":{"NAME":"D"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"ZY/(NZ^EhRe}5^=RaK.)","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"O]$OzY0yT1RU[0LGT;i^","fields":{"VAR":{"id":",A}mQ(##i[HsqlX;/U(#"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"@9Nae_C@N_)9loSOkVDL","fields":{"NAME":"C"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"Asov8sEUOQV77HkAl6_d","fields":{"SELECTION":"Direction.CLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"YoDtlv/-Z6lWv?%(q)[S","fields":{"VAR":{"id":"t1)=*b*Bq_g8H]J[Ed@I"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"hh0B_#pNa4WbC/;,qhy#","fields":{"NAME":"B"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"k]YM6q}%[xgP5Jmoyqg+","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_motor","id":"U:H0v2JZ`b(-jD7mG.WW","fields":{"VAR":{"id":"s~MX{KiJ-Ek|Hr7Rhcb8"}},"inputs":{"PORT":{"shadow":{"type":"blockParametersPort","id":"?1saDZm,+3^cJdgIs)%W","fields":{"NAME":"F"}}},"POSITIVE_DIRECTION":{"shadow":{"type":"blockParametersDirection","id":"QQO0b|f}CO`s65xAb`^1","fields":{"SELECTION":"Direction.COUNTERCLOCKWISE"}}}},"next":{"block":{"type":"variables_set_drive_base","id":"*|UPax^}l]x,aYnz}SE*","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc"}},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"xf;z!alcuC}3u9lMUBYD","fields":{"VAR":{"id":"sqag6!{v6[a+3j:oW796","name":"leftwheel","type":"Motor"}}}},"VAR2":{"shadow":{"type":"variables_get_motor_device","id":"Er%$(fi7[3cOVs_Z-QDC","fields":{"VAR":{"id":",A}mQ(##i[HsqlX;/U(#","name":"rightwheel","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_distance","id":"BhEZ2{Jz(OU^nKx5m64V","fields":{"VALUE0":62.4}}},"VALUE1":{"shadow":{"type":"unit_distance","id":"JTwPMEO[%Ml:8l{E(/XF","fields":{"VALUE0":80}}}},"next":{"block":{"type":"variables_setup_imported_function","id":"}1XRj5/^49p3Ca3(^E`h","fields":{"FROM_MODULE":{"id":"*T?yj*?GqSP-)LE)5NTp"},"VAR":{"id":"1vgfIVRY@*o;c)cP/w+a"}},"next":{"block":{"type":"variables_set_stopwatch","id":"i:GePG]`Yypj#wz9-[wL","fields":{"VAR":{"id":"o-@E-cWCCssQ27e=^`-c"}}}}}}}}}}}}}}}}}}},{"type":"blockGlobalStart","id":"3tJe|AWl0baN(wH9a$@.","x":138,"y":550,"deletable":false,"next":{"block":{"type":"blockDriveBaseDrive2","id":"Au[A7Z8@!_St:egMed%R","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"v*{p,8*09`m2.8^v~qoF","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"rpHo%cp}p5PSfBQTr%%u","fields":{"VALUE0":-10}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"fWEVLvqJ:ER8{:@J1y*%","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseResetWithValues","id":"PW57KjV)?iQe+B6t71E}","inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"8}MnsV-ojpKEowc$bKWV","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"VALUE0":{"shadow":{"type":"unit_distance","id":"Iu!RdD=`tbMx0*d{:uS5","fields":{"VALUE0":0}}},"VALUE1":{"shadow":{"type":"unit_angle","id":"hW4Vyd+f/=xrk_dPX$m:","fields":{"VALUE0":0}}}},"next":{"block":{"type":"blockDriveBaseUseGyro","id":"6U=t^Lb.CXlMVn:({]xK","fields":{"METHOD":"DRIVEBASE_USE_GYRO_TRUE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"3|6D4-`Bcf~e`oS/+Ojb","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}}},"next":{"block":{"type":"blockStopWatchDo","id":"D#m[7cCS`pv)W[q#D2w9","extraState":{"optionLevel":0},"fields":{"METHOD":"STOPWATCH_RESET"},"inputs":{"VAR":{"shadow":{"type":"variables_get_stopwatch","id":"U3ol%m`([wrC32=gqf?x","fields":{"VAR":{"id":"o-@E-cWCCssQ27e=^`-c","name":"stopwatch","type":"StopWatch"}}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"9_yg+P+:x1h7:e#1$lXb","extraState":{"optionLevel":1},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_SPEED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":";/9|^_b{d9RfUz8bH;:8","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_speed","id":"1T7%Bjxi[Y8PW}$N4CM$","fields":{"VALUE0":600}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"@VfxaP!phls2=c`pJuRB","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"tbusanKPsE:Yo=8ei=)H","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_acceleration","id":"JJ|vmeS?!wp{(B)toea#","fields":{"VALUE0":800}}}},"next":{"block":{"type":"blockMultiTask","id":"P9I4x#7(5m_/=_OM8ySt","extraState":{"optionLevel":1},"fields":{"METHOD":"MULTITASK_ALL"},"inputs":{"TASK0":{"block":{"type":"blockDriveBaseDrive2","id":"mp?h]1+N;*{xTN}()xO*","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"lc$M)_o3U*v(n}kc`E/B","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":")USZKhV.^$)@U*$k@9!4","fields":{"VALUE0":640}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"QH-d.uFVvx+Oix4]h03|","fields":{"VALUE":"Stop.HOLD"}}}}}},"TASK1":{"block":{"type":"blockMotorRun","id":"%+JsORK^B.i[[s!K~q{F","extraState":{"optionLevel":3},"fields":{"METHOD":"MOTOR_RUN_UNTIL_STALLED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"^yJ@9TiVP%ZjLGqQWm(5","fields":{"VAR":{"id":"s~MX{KiJ-Ek|Hr7Rhcb8","name":"rightattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"x5#;XO/Ln*a+g@s;8En4","fields":{"VALUE0":-500}}},"LIMIT":{"shadow":{"type":"unit_percent","id":"TSh,gfd8V#+7lPhrENZa","fields":{"VALUE0":50}}},"THEN":{"shadow":{"type":"parameters_stop_3","id":"*[^9i2a)~RWjydtGQn+Q","fields":{"VALUE":"Stop.COAST"}}}},"next":{"block":{"type":"blockMotorResetAngle","id":"D-$od):A8rz%,R~*l1}`","inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":":)*R|XM7oI/[6DmlZm!w","fields":{"VAR":{"id":"s~MX{KiJ-Ek|Hr7Rhcb8","name":"rightattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angle","id":"B?1n2pS}Omi~Azpp4d,(","fields":{"VALUE0":0}}}}}}}},"TASK2":{"block":{"type":"blockMotorRun","id":".a(+bzS!+vhOQ^q@n=v#","extraState":{"optionLevel":3},"fields":{"METHOD":"MOTOR_RUN_UNTIL_STALLED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"uVM4^reJc6H}H%j}=A!4","fields":{"VAR":{"id":"t1)=*b*Bq_g8H]J[Ed@I","name":"leftattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"f=@bP(4qH}V.u:[2gb4@","fields":{"VALUE0":-1000}}},"LIMIT":{"shadow":{"type":"unit_percent","id":"MZ_}zw8x/#:-GGJ{-1zv","fields":{"VALUE0":50}}},"THEN":{"shadow":{"type":"parameters_stop_3","id":"XfzI9R?{o)]Zd?neSI~}","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockMotorResetAngle","id":"QT!#`ifw#eJf2p+me4#R","inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"0{sdACBpi3^}3,FW2_;Z","fields":{"VAR":{"id":"t1)=*b*Bq_g8H]J[Ed@I","name":"leftattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angle","id":"a%s2n:]ytP3#(D4Le2t#","fields":{"VALUE0":0}}}}}}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"O8Vwby9q(~a4hdc;s+jI","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"W-@*?irREX1NiO-GB5ad","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"%mo3Zf1C*Ch2HSwD3Ln{","fields":{"VALUE0":-95}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"lLjc$;HnQ4p3G$R368Wp","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockImportTaskCallStatement","id":"ln1y!CW,%Cjk|VIi;HWA","extraState":{"optionLevel":7},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"QRJ}pw@JTRO`R54CW@XB","fields":{"VAR":{"id":"1vgfIVRY@*o;c)cP/w+a","name":"TurnByWheel","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"2fS`JI($#AUlT5xfI,zg","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"e/#1|AuWF]m;O#:jQZ3S","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}"}}}},"ARG1":{"shadow":{"type":"blockMathNumber","id":"~,T)_U`{l%@Mp@8so)`/","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":";^o5Zelq25/9=Oy^:2pV","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc"}}}},"ARG2":{"shadow":{"type":"blockMathNumber","id":"bl$#ml:|m)P$@INhiJ.]","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"y_ejsHo?Sq~kJP?u87lC","fields":{"VAR":{"id":"sqag6!{v6[a+3j:oW796"}}}},"ARG3":{"shadow":{"type":"blockMathNumber","id":"A;6ChZa0a(./#zFkHRl(","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"y-~.fKwWRNr45%=KM5!/","fields":{"VAR":{"id":",A}mQ(##i[HsqlX;/U(#"}}}},"ARG4":{"shadow":{"type":"blockMathNumber","id":"$lKxksh3k!4ho,:53FR]","fields":{"NUM":-89}}},"ARG5":{"shadow":{"type":"blockMathNumber","id":"ecn!)N{Fa*IzoR#hakt{","fields":{"NUM":100}}},"ARG6":{"shadow":{"type":"blockMathNumber","id":"=OS:Hj.-|$qF%0dP#=[l","fields":{"NUM":2}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"3#;wvBv;p+*A(bBC0$S8","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"+Cu0y}m*/o%Au.(}/;|F","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"@`G|)R`k)3(Pe]aZ=H70","fields":{"VALUE0":90}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"L7WFLCO|VRqYec}df?M[","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockMultiTask","id":"$XBTL,XukgH7|2Ks@ASE","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_RACE"},"inputs":{"TASK0":{"block":{"type":"blockMotorRun","id":"w0(,@}/]K$91|do[GO-S","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"}-oWt/E`4XluxT+F]MqW","fields":{"VAR":{"id":"t1)=*b*Bq_g8H]J[Ed@I","name":"leftattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"^hAJYo,kj[+X*X)gcuNJ","fields":{"VALUE0":750}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"-MtJexZ4dhWsT;~hn~5A","fields":{"VALUE0":1100}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"HP,A%A3i@ZG}6GW9=uC*","fields":{"VALUE":"Stop.COAST"}}}}}},"TASK1":{"block":{"type":"blockWaitTime","id":"=0.fm{4,g:RS3)`5dQMY","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"m?d,5rZ^Mnhnwj2VccFs","fields":{"VALUE0":3000}}}},"next":{"block":{"type":"blockPrint","id":"XZ5g`U|;G%AMr~r[AE]^","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"VJSnv;Y$k7`j;h;thU7,","fields":{"TEXT":"brushing timeout"}}}}}}}}},"next":{"block":{"type":"blockMotorRun","id":"]y(~l$MI|AZ?-6^i4R8[","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":"KTKUuZvFq~1kTDvV2~^/","fields":{"VAR":{"id":"t1)=*b*Bq_g8H]J[Ed@I","name":"leftattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"+.sswwqxqxFWXbf^u@vn","fields":{"VALUE0":600}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"P{~_`^~yVVdYRYc|I^YB","fields":{"VALUE0":-1100}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"TmRC440SlPi.d#FeY,W{","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"_KYt8ZpmzKjd0*tI[BVQ","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"hm8Kfa}pQ)]t*^|f}@Gz","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"o:H4+T;pL59+b_~4yWVP","fields":{"VALUE0":90}},"block":{"type":"blockMathArithmetic","id":"(X%Z4r!t3tS5l6~?A4Jx","fields":{"OP":"MINUS"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"LP]jloL5fsKR:jtczL`]","fields":{"NUM":-90}}},"B":{"shadow":{"type":"blockMathNumber","id":"R=fXQGRqB!:RJ?v3}Nuk","fields":{"NUM":1}},"block":{"type":"blockImuGetHeading","id":"-@4NhM2T_f|W_L2?Ta=R","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"~m;F}`N|593b|pmS.]|[","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}","name":"prime hub","type":"PrimeHub"}}}}}}}}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"lF7tekbN0Ot.:3C`f$(5","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"do,xdyF])I]`19wV}|M)","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"GK1XQqrG/7DCIqu9XCJ3","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"9i?%vf4pr#Q6/R,R32m+","fields":{"VALUE0":-90}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"dTWpZbDGt$Y*nl@pEg{0","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"8D|u)4YLWNON}r6P/gHC","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_TURN_RATE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"dE9ve{cDh,[lp,{Snd=`","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angularVelocity","id":"z@sZVQL{|dhh,Hy+m=!o","fields":{"VALUE0":360}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"-c|E9WJ{|I2hoN%5NwE[","extraState":{"optionLevel":4},"fields":{"METHOD":"DRIVEBASE_TURN_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"8krRcmRdE};`|xdsRjCt","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angularAcceleration","id":"dzjkC$=*Jwdgxnh{?/jj","fields":{"VALUE0":750}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"=7qQkZzwLSLLRVI}$2#X","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"k_%jA[YwGuH9y9XQ:wN_","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"1B;YR-(a3siD[HO0Ob,E","fields":{"VALUE0":51}},"block":{"type":"blockMathArithmetic","id":"^Da1`yF*]#0DUYQL1mvs","fields":{"OP":"MINUS"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":".(,b?V}cCgXt?]2xi9BU","fields":{"NUM":-42}}},"B":{"shadow":{"type":"blockMathNumber","id":"O~k+l_:/R$oj(X{nM^j)","fields":{"NUM":1}},"block":{"type":"blockImuGetHeading","id":"D}!bxc1`-;-gT[u%uiKz","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"dpcJHN:E^n#m)2VrTUFy","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}","name":"prime hub","type":"PrimeHub"}}}}}}}}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"WEvn|{k[3)]IKnKKn$Nx","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockImportTaskCallStatement","id":"EBZF{tLt)X7K|.A}zoK7","extraState":{"optionLevel":7},"inputs":{"VAR":{"shadow":{"type":"variables_get_imported_function","id":"V.@1B[knujQTJ}@OhKW*","fields":{"VAR":{"id":"1vgfIVRY@*o;c)cP/w+a","name":"TurnByWheel","type":"FunctionImported"}}}},"ARG0":{"shadow":{"type":"blockMathNumber","id":"2fS`JI($#AUlT5xfI,zg","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"WGD]Pd2?!0kf[]7dL,]3","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}"}}}},"ARG1":{"shadow":{"type":"blockMathNumber","id":"~,T)_U`{l%@Mp@8so)`/","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"#tMR-lr0{m*D2;Ve8x5E","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc"}}}},"ARG2":{"shadow":{"type":"blockMathNumber","id":"bl$#ml:|m)P$@INhiJ.]","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"6`%uz+^NvG69D_{^pWMF","fields":{"VAR":{"id":"sqag6!{v6[a+3j:oW796"}}}},"ARG3":{"shadow":{"type":"blockMathNumber","id":"A;6ChZa0a(./#zFkHRl(","fields":{"NUM":0}},"block":{"type":"blockreadOnlyGetter","id":"F]~7zn?3j7A2A+q1U-aV","fields":{"VAR":{"id":",A}mQ(##i[HsqlX;/U(#"}}}},"ARG4":{"shadow":{"type":"blockMathNumber","id":"CHN[sGX5UF#8v[z8O=v=","fields":{"NUM":-45}}},"ARG5":{"shadow":{"type":"blockMathNumber","id":"H@dW?/(^?cj%N*{,a#-b","fields":{"NUM":50}}},"ARG6":{"shadow":{"type":"blockMathNumber","id":"#IF?j`{azg=H}y2~wl;H","fields":{"NUM":2}}}},"next":{"block":{"type":"blockPrint","id":"{^Tu,jqsMGe7Cs$:PmwP","extraState":{"optionLevel":1},"fields":{"SEP":"SEP_COMMA_SPACE"},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"}$d+e5q;B=Kx+Q*2CFuf","fields":{"TEXT":"turning to map"}}},"TEXT1":{"shadow":{"type":"text","id":"buuewkUOV|[/G_2EER!u","fields":{"TEXT":"abc"}},"block":{"type":"blockImuGetHeading","id":"|{sX4J!o;nv-4?J+Yr3T","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"Ln#3?`WBbs,:4FDf{5)9","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}","name":"prime hub","type":"PrimeHub"}}}}}}}},"next":{"block":{"type":"blockMultiTask","id":"z,6~~laesXWyLQbo7r(S","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_RACE"},"inputs":{"TASK0":{"block":{"type":"blockDriveBaseConfigure","id":"u.4L943JMpMGt3Z~~v]e","extraState":{"optionLevel":1},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_SPEED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"x!G]l!UBaCVU:iPQ[g.3","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_speed","id":",X{lwSDlv/|mC0lSov`*","fields":{"VALUE0":600}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"d|60_AEc@y.u!k.2VksJ","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"x!-]CYQ_GV=tI+P:}RcO","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_acceleration","id":"O377AW{jO3:Jkb(X$n^!","fields":{"VALUE0":300}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"VwPRGg}q^b:pdGz}/0nJ","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"-nKeK:.0}OyGF]QkCv8N","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"jh8F.d~q7DO,]^11%A5o","fields":{"VALUE0":105}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"m@6F.7L+Kf%y1l8]Cf9-","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockMultiTask","id":"wy|3Zp03t_KeJA:QM5*=","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_ALL"},"inputs":{"TASK0":{"block":{"type":"blockDriveBaseDrive2","id":"Elw2FPdkyRheWU@`3/@P","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"(ZJ~2@xJl_7pgk1ZI6DB","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"8,F5fS1[QP[,MTACfzd9","fields":{"VALUE0":145}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"-Z9l}@[;Mn]p8`fK%]]q","fields":{"VALUE":"Stop.COAST"}}}}}},"TASK1":{"block":{"type":"blockMotorRun","id":"[70%1T$de(9pZ[-*Z1Jq","extraState":{"optionLevel":1},"fields":{"METHOD":"MOTOR_RUN_FOR"},"inputs":{"VAR":{"shadow":{"type":"variables_get_motor_device","id":".IY07GK^%z`$b[^9*XT/","fields":{"VAR":{"id":"s~MX{KiJ-Ek|Hr7Rhcb8","name":"rightattachment","type":"Motor"}}}},"VALUE0":{"shadow":{"type":"unit_angularVelocity","id":"lip*dIgLrh6.%1K@JGT*","fields":{"VALUE0":500}}},"ANGLE":{"shadow":{"type":"unit_angle","id":"X;gZs0}^X35E{hi!6;,.","fields":{"VALUE0":180}}},"THEN":{"shadow":{"type":"parameters_stop_4","id":"|@rJ^jQ.?n1]upVl]2C4","fields":{"VALUE":"Stop.COAST"}}}}}}}}}}}}}}},"TASK1":{"block":{"type":"blockWaitTime","id":"mJ(NH!~?HXO{%88uJ{kw","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"zAA[7xgIRF.8!ca@Zf:l","fields":{"VALUE0":4000}}}},"next":{"block":{"type":"blockPrint","id":"`C{wMSRv;@+JJX!(0^JH","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"yF7}DE1M:om2K}6/w#lf","fields":{"TEXT":"mapreveal timeout"}}}}}}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"#}mQK8R[.{]#;7^~j+#H","extraState":{"optionLevel":1},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_SPEED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"VJf^NgQrJj]4hP{_h)vt","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_speed","id":"7%RPVP3;=_tbG7mG,DFC","fields":{"VALUE0":800}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"mjEv/0EZXkK.^vB12Xs?","extraState":{"optionLevel":1},"fields":{"METHOD":"DRIVEBASE_STRAIGHT_SPEED"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"L%ig{tt!E]%3Tndk[VC]","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_speed","id":"Wo[5#YBDpVm(X%=Fc;bX","fields":{"VALUE0":1000}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"HW%b5jFvq0RDQF(JS6M|","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_TURN_RATE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"]rOxzCou}bwJI3d]-gzy","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angularVelocity","id":"7,n;QW*LYB^4URH)ZZ8Q","fields":{"VALUE0":360}}}},"next":{"block":{"type":"blockDriveBaseConfigure","id":"h+!*e)c6%#oL)Og=kqwy","extraState":{"optionLevel":4},"fields":{"METHOD":"DRIVEBASE_TURN_ACCELERATION"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"m1y?xTc!!Kt9O0J`;qn5","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angularAcceleration","id":"G^(-`[f4h{OBOh1g/1lJ","fields":{"VALUE0":750}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"`o^r;,+`$nY@x0M1(SKG","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"UwV6V.`W8XTH8(7,N@W]","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"Mo-QHm(nX;9Joa6tV:`I","fields":{"VALUE0":-270}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":")RS=UM9mR?5vJ(vD8pYB","fields":{"VALUE":"Stop.HOLD"}}}},"next":{"block":{"type":"blockDriveBaseDrive2","id":"5P]!XwF^xqCTZPFlM91x","extraState":{"optionLevel":3},"fields":{"METHOD":"DRIVEBASE_DRIVE_TURN"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"7w{y0s:lB3V]eF58YYA`","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_angle","id":"it~7*yi*E(}%4((b[Kai","fields":{"VALUE0":60}},"block":{"type":"blockMathArithmetic","id":"kCFEhRrL`JhXH`it+OJv","fields":{"OP":"MINUS"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":":`]aH@$0cH;r6C04w!6S","fields":{"NUM":15}}},"B":{"shadow":{"type":"blockMathNumber","id":"?h/rI50Xx/0z|1-1Z:5e","fields":{"NUM":1}},"block":{"type":"blockImuGetHeading","id":"t}`4ah:Fk^6;s5ku]-%~","inputs":{"VAR":{"shadow":{"type":"variables_get_imu_hub","id":"97e%qB[:AaoL[/KCFtHE","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}","name":"prime hub","type":"PrimeHub"}}}}}}}}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"Z{LjM=;{vlbb|~6v9V*i","fields":{"VALUE":"Stop.COAST"}}}},"next":{"block":{"type":"blockMultiTask","id":"u5,N%(b3o4@J|%eP3z}*","extraState":{"optionLevel":0},"fields":{"METHOD":"MULTITASK_ALL"},"inputs":{"TASK0":{"block":{"type":"blockDriveBaseDrive2","id":"TEm;T3;ZY8Wd^Xj9~hG#","extraState":{"optionLevel":2},"fields":{"METHOD":"DRIVEBASE_DRIVE_STRAIGHT"},"inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"?`{H~0sUEIvyK_9dK_Y]","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"ARG0":{"shadow":{"type":"unit_distance","id":"tcS6jB$DY81gCL9Qn6TD","fields":{"VALUE0":-700}}},"ARG1":{"shadow":{"type":"parameters_stop_4","id":"txL(K/~}!c*QLN)_Fj@l","fields":{"VALUE":"Stop.HOLD"}}}}}},"TASK1":{"block":{"type":"blockWaitTime","id":"=`;C;%Q^hG_wxPbok1nb","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"e^.budQ:WN#5M1N-l-eO","fields":{"VALUE0":500}}}},"next":{"block":{"type":"blockFlowForEach","id":"xRpUJ7BzxJaWlqoT5+C6","inputs":{"VAR":{"shadow":{"type":"variables_setup_iterable","id":"$ZIx%l2VgHlzel*)d5EY","fields":{"VAR":{"id":"%+1Qcb@V][B+d}1?0*pv","name":"item","type":"LoopVariable"}}}},"LIST":{"shadow":{"type":"blockListEmpty","id":"j!=D}v%)ixMdfH|pe2Li"},"block":{"type":"blockListCreate","id":"FwER3.St@TpIprH94c#a","extraState":{"optionLevel":4},"inputs":{"ADD0":{"shadow":{"type":"blockMathNumber","id":"TDfpj#|b.?r0gHp-#~y@","fields":{"NUM":0}}},"ADD1":{"shadow":{"type":"blockMathNumber","id":"5ZFrsV2wrf=oj^Tj`opg","fields":{"NUM":0}}},"ADD2":{"shadow":{"type":"blockMathNumber","id":"tA3cSb+f`Iy5]Aw:hV,9","fields":{"NUM":0}}},"ADD3":{"shadow":{"type":"blockMathNumber","id":"Y#-wQMT0^Fp1fZ~NZUZl","fields":{"NUM":15}}}}}},"DO":{"block":{"type":"blockSpeakerBeep","id":"zZaIZAqy2DUoqy(]9?4q","inputs":{"VAR":{"shadow":{"type":"variables_get_speaker_hub","id":"EH`pC:AHRwKuG@QKgIiV","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}","name":"prime hub","type":"PrimeHub"}}}},"VALUE0":{"shadow":{"type":"unit_frequency","id":"C)DIQN=:m_;)L]m=Fy)@","fields":{"VALUE0":500}},"block":{"type":"blockMathArithmetic","id":"j1X+CoYDgGNb:0JKGKlN","fields":{"OP":"ADD"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"bSMZBWc:ug)HgBbF4sFm","fields":{"NUM":500}}},"B":{"shadow":{"type":"blockMathNumber","id":"FDSW{_aY(zUH;W@5U{F(","fields":{"NUM":1}},"block":{"type":"blockMathArithmetic","id":",4P^Gy|P:9qS4f)]r996","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"0qi=7LG8Moq0Ta;IvDn4","fields":{"NUM":10}}},"B":{"shadow":{"type":"blockMathNumber","id":"IWtb.2vJyLtopCukNRey","fields":{"NUM":1}},"block":{"type":"variables_setup_iterableConstant","id":"~)@5C)~U[^%0nG*V#sJX","fields":{"VAR":{"text":"item"}}}}}}}}}},"VALUE1":{"shadow":{"type":"unit_time","id":"ew-7yNLVW,C%g1U~mB`w","fields":{"VALUE0":1}},"block":{"type":"blockMathArithmetic","id":"Xq#sxF#lGKwlAxxGzr5V","fields":{"OP":"ADD"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"Wg3VRvJ]@td[c@-,|P_4","fields":{"NUM":150}}},"B":{"shadow":{"type":"blockMathNumber","id":"9Lll7P@/jt;r5r5a-RHl","fields":{"NUM":1}},"block":{"type":"blockMathArithmetic","id":"*nLhT.,`#$-H##@eOvei","fields":{"OP":"MULTIPLY"},"inputs":{"A":{"shadow":{"type":"blockMathNumber","id":"sa81n=}Db3/Y_wVS_:5T","fields":{"NUM":15}}},"B":{"shadow":{"type":"blockMathNumber","id":",M4I^LWE^Qw(_%*kn:y3","fields":{"NUM":1}},"block":{"type":"variables_setup_iterableConstant","id":"IaN+|8UGcc^rgQs;yb97","fields":{"VAR":{"text":"item"}}}}}}}}}}},"next":{"block":{"type":"blockWaitTime","id":"l]^Q[4S*M!1qs=,RemO/","inputs":{"VALUE0":{"shadow":{"type":"unit_time","id":"GQ+=xh:WKQ;}~dDEhbxC","fields":{"VALUE0":50}}}}}}}}}}}}}},"next":{"block":{"type":"blockPrint","id":"{Y$qn$UJl_YXUavH7GT=","extraState":{"optionLevel":0},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"ir`emE|N+g7uVRaechI]","fields":{"TEXT":"abc"}},"block":{"type":"blockStopWatchTime","id":"@R:]f9K/)1CkWaN+[eKi","inputs":{"VAR":{"shadow":{"type":"variables_get_stopwatch","id":"#.09_E6joGlx2$!0qQ*)","fields":{"VAR":{"id":"o-@E-cWCCssQ27e=^`-c","name":"stopwatch","type":"StopWatch"}}}}}}}},"next":{"block":{"type":"blockPrint","id":"Xt*v-J173Y|[u#T)Oh2/","extraState":{"optionLevel":1},"fields":{"SEP":"SEP_COMMA_SPACE"},"inputs":{"TEXT0":{"shadow":{"type":"text","id":"jzM(3.~5nL{t`ZJ,+.Gv","fields":{"TEXT":"battery"}}},"TEXT1":{"shadow":{"type":"text","id":"4X3o%@t~_bHLZ*7Vod~W","fields":{"TEXT":"abc"}},"block":{"type":"blockBatteryMeasure","id":"gzaoB=z+la3*Y|BKA5KB","extraState":{"optionLevel":0},"fields":{"METHOD":"BATTERY_GET_VOLTAGE"},"inputs":{"VAR":{"shadow":{"type":"variables_get_battery_hub","id":"d!$voANFEd_%KtRW.YN4","fields":{"VAR":{"id":"B8==mMS.yb{H+|hfu.D}","name":"prime hub","type":"PrimeHub"}}}}}}}},"next":{"block":{"type":"blockDriveBaseStop","id":"9zb4(:tn+k/n_=5KlVi_","inputs":{"VAR":{"shadow":{"type":"variables_get_drive_base_device","id":"DIEApFu^d_Jt+2%V4Nk^","fields":{"VAR":{"id":"xYXBbuK+}hS#pUuM-BEc","name":"drive base","type":"DriveBase"}}}},"VALUE0":{"shadow":{"type":"parameters_stop_3","id":"c%yp*22RKSRNN(50+!}x","fields":{"VALUE":"Stop.COAST"}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}]},"variables":[{"name":"red","id":"7bN]Jb0AqU*yv?HJ^1v_","type":"ColorDef"},{"name":"orange","id":";2RV-8tUD*TO@gfq}BkI","type":"ColorDef"},{"name":"yellow","id":"yqe5}*:V1LGFJ,i6SK`c","type":"ColorDef"},{"name":"green","id":"??s:XiPmC~,1]zDeNFtI","type":"ColorDef"},{"name":"cyan","id":"%P-Exd2nUZETePShq(po","type":"ColorDef"},{"name":"blue","id":"r5(Pu*AC#LLH)g_i3-f5","type":"ColorDef"},{"name":"violet","id":"^|`Izt[%tAzuwC^4A=Sn","type":"ColorDef"},{"name":"magenta","id":"f2ohpSd/o4?JpXl6lc9d","type":"ColorDef"},{"name":"white","id":"|1eb2eTkco;~%aDc]qi~","type":"ColorDef"},{"name":"none","id":"kAhK;yKJmiO1Hs?xl,y:","type":"ColorDef"},{"name":"prime hub","id":"B8==mMS.yb{H+|hfu.D}","type":"PrimeHub"},{"name":"drive base","id":"xYXBbuK+}hS#pUuM-BEc","type":"DriveBase"},{"name":"item","id":"%+1Qcb@V][B+d}1?0*pv","type":"LoopVariable"},{"name":"stopwatch","id":"o-@E-cWCCssQ27e=^`-c","type":"StopWatch"},{"name":"utility","id":"*T?yj*?GqSP-)LE)5NTp","type":"ModuleImported"},{"name":"TurnByWheel","id":"1vgfIVRY@*o;c)cP/w+a","type":"FunctionImported"},{"name":"leftwheel","id":"sqag6!{v6[a+3j:oW796","type":"Motor"},{"name":"rightwheel","id":",A}mQ(##i[HsqlX;/U(#","type":"Motor"},{"name":"leftattachment","id":"t1)=*b*Bq_g8H]J[Ed@I","type":"Motor"},{"name":"rightattachment","id":"s~MX{KiJ-Ek|Hr7Rhcb8","type":"Motor"}],"info":{"type":"pybricks","version":"1.3.2"}}
from pybricks.hubs import PrimeHub
from pybricks.parameters import Axis, Direction, Port, Stop
from pybricks.pupdevices import Motor
from pybricks.robotics import DriveBase
from pybricks.tools import StopWatch, multitask, run_task, wait

from utility import TurnByWheel

# Set up all devices.
prime_hub = PrimeHub(top_side=Axis.Z, front_side=Axis.X)
stopwatch = StopWatch()
leftwheel = Motor(Port.D, Direction.COUNTERCLOCKWISE)
rightwheel = Motor(Port.C, Direction.CLOCKWISE)
leftattachment = Motor(Port.B, Direction.COUNTERCLOCKWISE)
rightattachment = Motor(Port.F, Direction.COUNTERCLOCKWISE)
drive_base = DriveBase(leftwheel, rightwheel, 62.4, 80)

async def subtask():
    await rightattachment.run_until_stalled(-500, Stop.COAST, 50)
    rightattachment.reset_angle(0)

async def subtask2():
    await leftattachment.run_until_stalled(-1000, Stop.HOLD, 50)
    leftattachment.reset_angle(0)

async def subtask3():
    await wait(3000)
    print('brushing timeout')

async def subtask4():
    drive_base.settings(straight_speed=600)
    drive_base.settings(straight_acceleration=300)
    await drive_base.straight(105)
    await multitask(
        drive_base.straight(145, then=Stop.COAST),
        rightattachment.run_angle(500, 180, Stop.COAST),
    )

async def subtask5():
    await wait(4000)
    print('mapreveal timeout')

async def subtask6():
    await wait(500)
    for item in [0, 0, 0, 15]:
        await wait(0)
        await prime_hub.speaker.beep(500 + 10 * item, 150 + 15 * item)
        await wait(50)

async def main():
    await drive_base.straight(-10)
    drive_base.reset(0, 0)
    drive_base.use_gyro(True)
    stopwatch.reset()
    drive_base.settings(straight_speed=600)
    drive_base.settings(straight_acceleration=800)
    await multitask(
        drive_base.straight(640),
        subtask(),
        subtask2(),
    )
    await drive_base.turn(-95)
    await TurnByWheel(prime_hub, drive_base, leftwheel, rightwheel, -89, 100, 2)
    await drive_base.straight(90)
    await multitask(
        leftattachment.run_angle(750, 1100, Stop.COAST),
        subtask3(),
        race=True,
    )
    await leftattachment.run_angle(600, -1100)
    await drive_base.turn(-90 - prime_hub.imu.heading())
    await drive_base.straight(-90)
    drive_base.settings(turn_rate=360)
    drive_base.settings(turn_acceleration=750)
    await drive_base.turn(-42 - prime_hub.imu.heading())
    await TurnByWheel(prime_hub, drive_base, leftwheel, rightwheel, -45, 50, 2)
    print('turning to map', prime_hub.imu.heading(), sep=", ")
    await multitask(
        subtask4(),
        subtask5(),
        race=True,
    )
    drive_base.settings(straight_speed=800)
    drive_base.settings(straight_speed=1000)
    drive_base.settings(turn_rate=360)
    drive_base.settings(turn_acceleration=750)
    await drive_base.straight(-270)
    await drive_base.turn(15 - prime_hub.imu.heading(), then=Stop.COAST)
    await multitask(
        drive_base.straight(-700),
        subtask6(),
    )
    print(stopwatch.time())
    print('battery', prime_hub.battery.voltage(), sep=", ")
    drive_base.stop()


run_task(main())